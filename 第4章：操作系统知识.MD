计算机软件分为系统软件和应用软件，系统软件是计算机系统的一部分

## 操作系统

两个重要作用：

1. 通过资源管理提高计算机系统效率
2. 改善人机界面向用户提供友好的工作环境

4个特性：并发、共享、虚拟、不确定性

### 分类

1. 批处理操作系统（单道批处理、多道批处理）
2. 分时操作系统：轮流为各个终端的用户服务（多路性、独立性、交互性、及时性）
3. 实时操作系统（实时控制，如武器控制、实时信息处理，如订票系统）
4. 网络操作系统：使联网计算机能方便有效的共享网络资源，为用户提供各种服务的软件和有关协议的集合
5. 分布式操作系统：由多个分散的计算机连接而成的计算机系统，无主次之分
6. 微型计算机操作系统：就是人们经常使用的电脑系统
7. 嵌入式操作系统：嵌入智能芯片环境中，对芯片以及它所操作、控制的各部件等资源统一协调、处理、控制（微型、定制、实时、可靠、易移植）

### 进程

程序顺序执行时主要特征：顺序性、封闭性、可再现性

程序并发执行特征：
1. 失去了程序的封闭性
2. 程序和机器的执行程序的活动不再一一对应
3. 并发程序间的相互制约性（后续程序被前驱程序间接制约）

进程由程序、数据、进程控制块（PCB）组成，PCB是进程存在的唯一标志

程序部分描述了进程需要完成的功能

数据部分包括程序执行时所需的数据及工作区

3种基本状态：运行、就绪、阻塞

运行：进程在处理机上运行时，处于运行状态

就绪：一个进程获得了除处理机外一切所需资源

阻塞：在等待某事件发生而暂时停止运行，此时即使把处理机分配给进程也无法运行

进程同步：在系统中一些需要相互合作，协同工作的进程，这样的相互联系称为进程的同步

进程互斥：多个进程因争用临界资源而互斥执行

### 信号量机制
是一种有效的进程同步与互斥工具  
信号量机制主要有整型信号量、记录型信号量、信号集机制  
公用信号量，实现进程间的互斥，初始值为1或资源的数目  
私用信号量，实现进程间的同步，初始值为0或某个正整数

PV操作：是实现进程同步与互斥的常用方法，P表示申请一个资源（S=S-1,S>=0则进程继续），V表示释放一个资源（S=S+1,S>0则进程继续）

PV操作解题思路：先根据前趋图和已知的部分pv操作，确定前趋图中的带箭头的线对应的信号量分别是哪个，确定信号量以后，箭头的起点做v操作，箭头终点做p操作。

### 临界区管理的原则

1. 有空即进，临界区无进程时，允许进程进入并只能在临界区运行有限时间
2. 无空则等，临界区有进程时，其它进程必须等待进入以保障进程互斥地访问临界资源
3. 有限等待，对要访问临界资源的进程，应保证进程能在有限时间进入临界区
4. 让权等待，当进程不能进入自己的临界区时，应立即释放处理机， 以免进程陷入忙等状态

### 磁盘调度
目标是使磁盘的平均寻道时间最少  
1. 先来先服务（FCFS），平均寻道时间较长
2. 最短寻道时间优先（SSTF），不能保证平均寻道时间最短
3. 扫描算法（SCAN），优先考虑磁头移动方向，其次考虑要访问的磁道与当前磁道的距离
4. 单向扫描调度算法

### 文件管理

文件是具有符号名的、在逻辑上具有完整意义的一组相关信息项的集合

### 进程调度

进程调度指的是当优先级更高的进程到来时如何分配CPU，调度方式分为剥夺和不可剥夺，剥夺即强行将CPU分配给优先级高的进程，不可剥夺必须等当前进程释放CPU再分配给优先级高的进程

#### 调度算法

1. 先来先服务（FCFS）
2. 时间片轮转（固定时间、可变时间）
3. 优先级调度：每个进程都有优先数，值大的优先级高（静态优先级：创建后不可变，动态优先级：运行过程中可变）
4. 多级反馈调度

死锁：指两个以上的进程互相要求对方已经占有的资源导致无法继续进行下去的现象

死锁产生原因：竞争资源及进程推进顺序非法

4个必要条件：互斥条件、请求保持条件、不可剥夺条件、环路条件

死锁处理：鸵鸟策略（无视）、预防策略、避免策略、检测与解除死锁

预防策略：限制并发进程对资源的请求

避免策略：（银行家算法：对进程发出的每一个系统可以满足的资源请求命令加以检测，如果发现分配资源后系统进入不安全状态，则不予分配）

死锁检测：运行一个死锁检测程序判断系统是否发生死锁

死锁解除：

1. 资源剥夺法：从一些进程那里强行剥夺足够的资源分配给死锁进程（计算机也是一个弱肉强食的世界）
2. 撤销进程法：根据某种策略逐个撤销进程，直到解除死锁

n个进程，每个进程需要3个资源，避免死锁至少需要资源R个数 R = (3 - 1)n + 1,也就是至少保证一个进程正常执行，执行完释放资源可以让其他进程得以执行

### 线程

线程是进程的一个实体，是被系统独立分配和调度的基本单位，线程只拥有一点运行中必不可少的资源，它和同属一个进程的其他线程共享进程所拥有的全部资源

线程也有就绪、运行和阻塞3种基本状态，这点类似于进程，不同的是用户级线程不依赖于内核，这类线程的创建、撤销、切换都不利用系统调用来实现，而进程不管是系统进程还是用户进程，都依赖于内核中的进程调度

### 存储管理  
存储管理方案：分区存储、分页存储、分段存储、段页式存储、虚拟存储

分区存储管理，基本思想是把主存分为若干区域，限定用户只能在自己的区域中运行

#### 分页存储管理

查找页表可得到物理块号  

将页号与页表长度比较，如果页号 >= 页表寄存器的页表长度，则访问越界，产生越界中断信号

逻辑地址转物理地址：  

1. 将逻辑地址转换为二进制
2. 根据页面大小（如4k，即2的12次方），取后12位即为页内地址，前面的为页号
3. 根据页号查页表得到物理块号，转换成二进制
4. 物理块号和页内地址直接拼接，得到物理地址，转换为十六进制


#### 段式存储管理
物理地址 = 基址 + 段内地址  

将逻辑地址中的段号与段表长度比较，如果段号 >= 段长，则访问越界，产生越界中断信号  

然后再将段内地址和该段的段长比较，如果段内地址 >= 段长，同样产生越界中断信号  

#### 段页式存储管理

根据段号查段表 => 页面起始地址 => 根据页号查页表 => 物理块号 => 拼接页内地址 => 物理地址

### 磁盘驱动调度
1. 先来先服务
2. 最短寻道时间优先
3. 扫描算法（电梯调度算法）
4. 单向扫描调度算法

### 旋转调度算法
1. 进程访问同磁道不同编号的扇区
2. 进程访问不同磁道不同编号的扇区
3. 进程访问不同磁道相同编号的扇区

1和2 按磁道顺序传送操作，3，任选一个磁头位置下的扇区进行传送操作

### 文件

文件逻辑结构分为两大类

1. 有结构的记录式文件，由一个以上的记录构成的文件
2. 无结构的流式文件，由一串顺序字符流构成的文件，UNIX系统中，所有文件都被看作流式文件

文件物理结构

1. 连续结构：逻辑上连续的文件依次存放在连续编号的物理块上
2. 链接结构：每个物理块设有一个指针指向下一个物理块
3. 索引结构：系统为每个文件建立一张索引表

文件控制块（File Controller Block 简称FCB）包含以下三类信息：

* 基本信息类：如文件名、物理地址、文件长度、文件块数
* 存取控制信息类：文件存取权限
* 使用信息类：新建日期、lastmodify等

#### 位示图

每一位对应文件存储器上的一个物理块，如计算机系统中字长为32位，那么在位示图中的第0个字（逻辑编号）对应文件存储器上0~31号物理块，也就是每行32个物理块

#### 文件共享

1. 硬链接：不同文件名与同一个文件实体的链接
2. 符号链接：就是所谓的软链，类似于快捷方式，是文件实体的映射

#### 文件保护（权限）

1. 存取控制矩阵：简单、清楚，当文件和用户数过多时，矩阵占用很大空间，验证过程费时
2. 存取控制表：把用户分为三类：文件主、同组用户、其他用户，每类用户的存取权限为读、写、执行以及它们的组合
3. 用户权限表：以用户或用户组为单位将用户可存取的文件集中起来存入表中
4. 密码：文件加密，知道密码的人才可读

### 系统的安全和可靠性

系统安全分为4个级别：系统级、用户级、目录级、文件级

系统级：不允许未经授权用户进入系统

用户级：对所有用户分类，对指定用户分配权限

目录级：为了保护系统中各种目录而设计

文件级：对文件属性设置各种属性来控制用户对它的访问，如只读、仅执行等

### 作业调度

作业调度算法：先来先服务、短作业优先、响应比高优先

作业响应时间 = 作业进入系统后等待时间 + 作业执行时间

响应比 = 作业响应时间 / 作业执行时间 = 1 + 作业等待时间 / 作业执行时间

